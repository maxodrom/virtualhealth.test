# Virtualhealth test task

См. описание задач в файле task.txt, ответы и комментарии по отдельным вопросам - в doc.pdf

## Разворачивание и установка проекта

Выполните следующие шаги:

- создайте какую-либо локальную корневую директорию для проекта и перейдите в нее, выполнив команды:
``` 
mkdir /path/to/project/folder
cd /path/to/project/folder
```

- склонируйте проект с Github в созданную вами директорию проекта на шаге выше (точка на конце команды git clone 
обязательна, если вы хотите склонировать проект в текущую директорию без создания вложенной директории "virtualhealth"): 
```
git clone git@github.com:maxodrom/virtualhealth.git .
```

- после клонирования выполните команду:
```
composer update
```

- создайте новую базу данных MySQL, например, с именем virtualhealth:
```
CREATE DATABASE `virtualhealth`
```

- настройте конфигурацию для соединения с БД (MySQL) для адекватной работы приложения и выполнения миграций;
 для этого отредактируйте файл www/protected/config/database.php. Укажите свои настройки для хоста, пользователя
 и пароль для соединения с сервером MySQL. 
 При необходиммости измените также название БД в конфигурации для connectionStrong. Например:
 
``` 
return array(
	'class' => 'CDbConnection',
	'connectionString' => 'mysql:host=localhost;dbname=virtualhealth',
	'username' => 'root',
	'password' => 'your password',
	'tablePrefix' => 'tb_',
	'charset'=>'utf8',
	...
);
```

- далее выполните миграции:
```
cd www/protected
yiic migrate 
```  

Должна выполниться одна миграция: 
```
...
...

-- Dump completed on 2014-12-15 11:56:33
 ... done (time: 14.588s)
*** applied m160409_222243_init (time: 17.683s)


Migrated up successfully.
```

- Остался последний шаг - запуск приложения. Для этого можно создать виртуальный хост и настроить, чтобы его 
DOCUMENT_ROOT указывал на директорию www. Существует и другой альтернативный способ запуска приложения. Если у вас 
установлен PHP версии >=5.4, то можно запустить приложение в контексте встроенного в PHP сервера.
Для этого просто перейдите в директорию www и выполните в ней команду:
```
php -S localhost:8000
```

Если выбран последний вариант, то в браузере приложение будет доступно по адресу: http://localhost:8000

Крайне рекомендуется выставить индексы на соответствующие поля (см. пояснения в doc.pdf) 
для ускорения работы и значимого повышения производительности приложения. 
Эти индексы не были выставлены, т.к. по условиям задач изменять структуру БД 
(а значит и индексы как элементы этой структуры) было запрещено.

### Enjoy!